---
title: 操作系统-进程管理
date: 2021-12-09
categories: 
  - 操作系统概论
tags: 
  - 笔记

---

[TOC]

## 进程的描述

### 程序的顺序执行

#### 含义

先进入内存的程序先执行，在一个程序之前完毕之前，不能执行其他程序（队列 --> 先进先出）

#### 特点

==顺序性== ==封闭性== ==可再现性==

```mermaid
flowchart LR
A[输入一批数据]-->B[处理数据]-->C[打印处理结果]-->A
```

> ⚠️ 不能使输入机、处理器和打印机同时忙碌

### 程序的并发执行

#### 含义

程序并发执行是指在**<span style='color: red'>同一时间间隔内</span>**运行多个程序。一个程序执行结束前，可以运行其他程序。

⭐️ 宏观并行：用户看到的是多个程序同时向前推进

⭐️ 微观串行：任意时刻一个CPU上只有一个程序在执行

#### 特点

==间断性==  程序在CPU上执行是时断时续的

==失去封闭性== 系统的状态不再只对正在执行的程序可见

==不可再现性== 同一个程序在输入相同的情况下多次运行，可能出现不同的结果

### 进程的概念

#### 进程的定义

进程是允许并发执行的程序在某个数据集合上的运行过程。

`进程=正文段+用户数据段+进程控制块（PCB）`

#### 进程的特征

1. **<span style='color: red'>并发性</span>** 多个进程实体能在一段时间间隔内同时运行，并发性是进程和现代操作系统的重要特征
2. **<span style='color: red'>动态性</span>** 进程是实体的执行过程`执行程序-->创建进程 获得CPU-->执行指令 运行中止-->被撤销`
3. **<span style='color: red'>独立性</span>** 独立运行和资源调度的基本单位
4. **<span style='color: red'>异步性</span>** 进程执行时断时续，何时执行，何时暂停都无法预知
5. **<span style='color: red'>结构特征</span>** 进程实体包括用户正文段，用户数据段和进程控制块

> 💡（速记） 发 动 独 异 结构

#### 进程与程序的比较

1. 程序是具有独立功能的一组指令的集合 

   ==静态== ==永久== ==指令的集合==

2. 进程是运行并发执行程序在某个数据集合上的运行过程

   ==动态== ==暂时== ==正文段+用户数据段+进程控制块==

3. 进程是程序的一次执行

4. 一个程序可以对应多个进程

5. <span style='background: yellow'>❓同一个进程能顺序的执行几个程序</span>

### 进程控制块（PCB）

进程控制块是**<span style='color: red'>进程实体的一部分</span>**，是操作系统中**<span style='color: red'>最重要的数据结构</span>**。

进程控制块中记录了操作系统所需要的，用于描述进程及控制进程运行所需的全部信息

1. **进程标识符信息**   用户唯一标识一个进程

2. **处理机状态信息**

   ```mermaid
   flowchart LR
   A[通用寄存器]---
   B[指令计数器]---
   C[程序状态字PSW]---
   D[用户指针栈]
   ```

   

3. **进程调度信息** 包括进程状态信息、进程优先级和进程调度所需的其他信息

4. **进程控制信息** 包括程序和数据的地址、进程同步和通信机制、资源清单、以及链接指针

### 进程的状态

![image-20211209163543332](./images/操作系统-进程管理/image-20211209163543332.png)

### 进程的组织

进程的组织世界上是进程控制块的组织

#### 链接方式

把系统中具有**相同状态**的进程控制块用其中的**链接字**（处理机状态信息中的属性PSW）连成一个队列

1. 执行指针队列 PCB1
2. 就绪队列指针 PCB2，PCB4
3. 阻塞队列指针 PCB3，PCB5

> 💡 执行指针队列 **<span style='color: red'>只能有一个指针</span>** 

#### 索引方式

系统根据所有进程的状态，建立索引表，索引表的每一个表项指向一个PCB物理块

#### 进程队列

把具有相同状态的进程控制块用队列组织起来

eg: 就绪队列1，就绪队列2，阻塞队列1，I/O 阻塞队列...

## 进程的控制

### 进程的创建

<img src="images/操作系统-进程管理/image-20211209172152743.png" alt="image-20211209172152743" style="zoom:50%;" />

#### 什么情况下需要创建进程

==用户登录== ==作业调度== ==提供服务== ==应用请求==

##### ※ 创建进程的步骤

1. 申请空白PCB
2. 为新进程分配资源
3. 初始化进程控制块
4. 将新进程插入到就绪队列

##### ※ 进程被创建时，有两种执行可能

1. 父进程与子进程并发执行
2. 父进程等待，直到某个或全部子进程执行完毕

##### ※ 子进程的地址空间，有两种可能

1. 子进程共享父进程的地址空间
2. 子进程拥有独立地址空间

#### 什么情况下会进行进程的阻塞

==请求系统服务== ==启动某种操作== ==新数据尚未到达== ==无新工作可做==

##### ※完成进程阻塞的过程

1. 将进程的状态改为阻塞态
2. 将进程插入相应的阻塞队列
3. 转到进程调度程序，从就绪队列中选择进程为其分配CPU

> 💡 改状态 ----> 进队列 ----> 进程调度

#### 进程的唤醒

##### ※进程唤醒的过程

1. 将进程从阻塞队列移出
2. 将进程状态由阻塞态改为就绪态
3. 将进程插入就绪队列

> 💡 出队列 ----> 改状态 ----> 进就绪队列

#### 什么情况下进程会终止

==进程正常执行完毕==

##### ※ 完成进程终止的过程

1. 从进程PCB中读取进程状态
2. 若进程正在执行，则终止进程的执行
3. 释放资源
4. 将终止的进程PCB移出

> 💡读状态----> 终止进程 ----> 释放资源 ----> 移出PCB

## 操作系统的内核

操作系统内核是计算机硬件的第一扩充，内核执行操作系统与硬件关系密切，执行频率高的模块，常驻内存

### 内核

#### 支撑功能

==中断处理==、==时钟管理==、==原语操作==

#### 资源管理功能

==进程管理==、==存储管理==、==设备管理==

### 中断

#### 含义

中断是改变处理器执行指令顺序的一种事件。

出现中断时，计算机停止现在程序的运行，转向对这些中断事件的处理，处理结束后再返回到现在程序的间断处。

#### 为什么要中断

引入中断机制后，CPU可以与其他设备并行工作，能有效**<span style='color: red'>提高CPU的利用率</span>**，改善系统性能，**<span style='color: red'>支持系统的异步</span>**操作。

#### 中断的分类

1. 同步中断（内部中断或异常）
2. 异步中断（外部中断）
   1. 外部可屏蔽中断
   2. 外部不可屏蔽中断

#### 引起中断的原因

1. 认为设置中断
2. 程序性事故
3. 硬件固件
4. I/O设备
5. 外部事件

##### 中断响应

1. 响应中断的条件
2. 响应中断的时机

##### 中断的处理

<img src="images/操作系统-进程管理/image-20211210151450814.png" alt="image-20211210151450814" style="zoom:50%;" />

### 时钟管理

### 系统调佣





## 进程同步

## 进程通信

## 线程



